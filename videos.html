<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video per Categoria</title>
</head>
<body>
    <h1>Video per Categoria</h1>
    <label for="categoryFilter">Filtra per Categoria:</label>
    <select id="categoryFilter">
        <option value="">Tutte le categorie</option>
        <option value="Sport">Sport</option>
        <option value="Musica">Musica</option>
        <option value="Cucina">Cucina</option>
        <!-- Aggiungi altre categorie secondo necessità -->
    </select><br>
    <ul id="videoList">
        <!-- Qui verranno aggiunti dinamicamente i video disponibili -->
    </ul>

    <script>
        // Recupera l'elenco dei video dal repository GitHub
        fetch("https://api.github.com/repos/USERNAME/REPO/issues?state=closed")
        .then(response => response.json())
        .then(data => {
            // Filtra solo gli issue che contengono link a video
            var videoIssues = data.filter(issue => issue.body.includes("link al video"));

            // Aggiungi dinamicamente i video all'elenco
            var videoList = document.getElementById("videoList");
            videoIssues.forEach(issue => {
                var videoLink = issue.body.match(/link al video: (.+)/)[1];
                var title = issue.title;
                var category = issue.body.match(/categoria: (.+)/)[1];
                var categoryFilter = document.getElementById("categoryFilter").value;
                if (!categoryFilter || category === categoryFilter) {
                    var listItem = document.createElement("li");
                    listItem.innerHTML = `<h3>${title}</h3><video controls><source src="${videoLink}" type="video/mp4"></video>`;
                    videoList.appendChild(listItem);
                }
            });
        })
        .catch(error => console.error("Si è verificato un errore:", error));
    </script>
</body>
</html>
